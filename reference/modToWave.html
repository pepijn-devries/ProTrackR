<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert a PTModule object into an audio Wave object — modToWave • ProTrackR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert a PTModule object into an audio Wave object — modToWave"><meta name="description" content="Converts a PTModule object into a tuneR::Wave
object, which can be played, further analysed, modified and saved."><meta property="og:description" content="Converts a PTModule object into a tuneR::Wave
object, which can be played, further analysed, modified and saved."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ProTrackR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../reference/ProTrackR-package.html">Package documentation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pepijn-devries/ProTrackR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert a PTModule object into an audio Wave object</h1>
      <small class="dont-index">Source: <a href="https://github.com/pepijn-devries/ProTrackR/blob/master/R/09playing_routines.r" class="external-link"><code>R/09playing_routines.r</code></a></small>
      <div class="d-none name"><code>modToWave.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Converts a <code><a href="PTModule-class.html">PTModule</a></code> object into a <code><a href="https://rdrr.io/pkg/tuneR/man/Wave.html" class="external-link">tuneR::Wave</a></code>
object, which can be played, further analysed, modified and saved.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for class 'PTModule'</span></span>
<span><span class="fu">modToWave</span><span class="op">(</span></span>
<span>  <span class="va">mod</span>,</span>
<span>  video <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PAL"</span>, <span class="st">"NTSC"</span><span class="op">)</span>,</span>
<span>  target.rate <span class="op">=</span> <span class="fl">44100</span>,</span>
<span>  target.bit <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  stereo.separation <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  low.pass.filter <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  tracks <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,</span>
<span>  mix <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mod">mod<a class="anchor" aria-label="anchor" href="#arg-mod"></a></dt>
<dd><p>An object of class <code><a href="PTModule-class.html">PTModule</a></code></p></dd>


<dt id="arg-video">video<a class="anchor" aria-label="anchor" href="#arg-video"></a></dt>
<dd><p>The video mode of a Commodore Amiga affects timing routines and
the playback sample rate. This mode can be specified with this argument and
is represented by a <code>character</code> string that can have either the value
'<a href="https://en.wikipedia.org/wiki/PAL" class="external-link">PAL</a>'
or '<a href="https://en.wikipedia.org/wiki/NTSC" class="external-link">NTSC</a>'. PAL is used by default.</p></dd>


<dt id="arg-target-rate">target.rate<a class="anchor" aria-label="anchor" href="#arg-target-rate"></a></dt>
<dd><p>A positive <code>integer</code> sample rate for the target <code>Wave</code>.
Should be at least 2000.
Default value is 44100 Hz, which is conform CD quality. 22050 Hz will also
produce a decent sound quality and saves you some working memory.</p></dd>


<dt id="arg-target-bit">target.bit<a class="anchor" aria-label="anchor" href="#arg-target-bit"></a></dt>
<dd><p>Number of bits for the target <code>Wave</code>. Should be a <code>numeric</code>
value of either 8, 16, 24 or 32. Default is 16, which is conform CD quality
(the quality doesn't really improve at higher bit values, as the original
samples are of 8 bit quality).</p></dd>


<dt id="arg-stereo-separation">stereo.separation<a class="anchor" aria-label="anchor" href="#arg-stereo-separation"></a></dt>
<dd><p>A <code>numeric</code> value between 0 and 1.
When set to 1 (default), stereo channels (Amiga channels 1 and 4 on left,
and channels 2 and 3 on right) are completely separated. When set to
less than 1, stereo channels are mixed, where the number gives the
fraction of separation of the channels. When set to 0, both channels
are completely mixed and a mono <code>Wave</code> is returned.</p></dd>


<dt id="arg-low-pass-filter">low.pass.filter<a class="anchor" aria-label="anchor" href="#arg-low-pass-filter"></a></dt>
<dd><p>A <code>logical</code> value indicating whether low pass
filters should be applied when generating wave data. The Commodore Amiga
had hardware audio filters. One (low pass 6 db/Oct tuned at
4.9 kHz) that filters all audio and one (low pass 12 db/Oct tuned at
approximately 3.3 kHz) that can be turned on and off at will with effect
command E00/E01 (see also <a href="ProTrackR-package.html">ProTrackR</a> documentation,
section on effect commands). These filters are only applied when the
<code>low.pass.filter</code> argument is set to <code>TRUE</code> and the
<code>target.rate</code> is set to values &gt; 4.9 kHz. If you don't want to simulate
this typical Amiga sound, turn the filters off to save processing time.</p></dd>


<dt id="arg-tracks">tracks<a class="anchor" aria-label="anchor" href="#arg-tracks"></a></dt>
<dd><p>Either <code>logical</code> or <code>numeric</code> values indicating
which of the 4 <code><a href="PTTrack-class.html">PTTrack</a></code>s are to be converted. By default
all 4 tracks are selected.</p></dd>


<dt id="arg-mix">mix<a class="anchor" aria-label="anchor" href="#arg-mix"></a></dt>
<dd><p>A logical value indicating whether the 4 Amiga channels should
be mixed to the 2 (stereo) output channels. When set to <code>TRUE</code> (default) a stereo
<code><a href="https://rdrr.io/pkg/tuneR/man/Wave.html" class="external-link">tuneR::Wave</a></code> object is returned. When set to <code>FALSE</code> a
multi-channel <code><a href="https://rdrr.io/pkg/tuneR/man/WaveMC.html" class="external-link">tuneR::WaveMC</a></code> object is returned. The
<code>stereo.separation</code> argument is ignored in the latter case.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments that are passed to <code><a href="playingtable.html">playingtable</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="https://rdrr.io/pkg/tuneR/man/Wave.html" class="external-link">tuneR::Wave</a></code> object, generated from the
<code>mod</code> object is returned. A <code><a href="https://rdrr.io/pkg/tuneR/man/WaveMC.html" class="external-link">tuneR::WaveMC</a></code> object is returned when
the <code>mix</code> argument is set to <code>FALSE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Before the <code><a href="PTModule-class.html">PTModule</a></code> object can be converted into a
<code><a href="https://rdrr.io/pkg/tuneR/man/Wave.html" class="external-link">tuneR::Wave</a></code> object, the rows of the
<code><a href="PTPattern-class.html">PTPattern</a></code> objects in the module need to be put
in the right order. This method does that by calling
<code><a href="playingtable.html">playingtable</a></code>.</p>
<p>Once the rows of the pattern tables are in the right order, all selected
<code><a href="PTTrack-class.html">PTTrack</a></code> objects of the module are looped by this function
and the routines described below are applied to each track.</p>
<p>On the Commodore Amiga the chip responsible for audio output (Paula),
the audio playback of samples can be controlled by the user in two ways:
the playback rate of the sample can be changed by specifying 'period'
values (see e.g. <code><a href="sampleRate.html">periodToSampleRate</a></code>) and specifying a
volume which is linearly scaled between 0 (silent) and 64 (maximum).</p>
<p>So, for each track, the correct period and volume values are determined
based on the note, effect command and sample information in the module.</p>
<p>Then, the <code><a href="PTSample-class.html">PTSample</a></code> objects are resampled, using the
period values and volume values as determined in the previous step.</p>
<p>Next audio filters are applied to mimic original Commodore Amiga
sound. Finaly, the wave data for each separate track is mixed to
one (mono) or two (stereo) of the output channels.</p>
<p>Converting ProTracker modules into wave objects can be time consuming.
The time required to convert an object obviously depends on your
machine's capacities and the length of the module but also the
complexity of the module. To speed up the conversion you could
reduce the target sample rate or turn off the low pass filter.
On modern machines, the time required for conversion should generally
be less than the playback time of the module.</p>
<p>You can save the resulting <code><a href="https://rdrr.io/pkg/tuneR/man/Wave.html" class="external-link">tuneR::Wave</a></code> object by calling
<code><a href="https://rdrr.io/pkg/tuneR/man/writeWave.html" class="external-link">tuneR::writeWave</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>As audio can be mixed with this package at frequencies much greater than the
Commodore Amiga's audio output rate, some aliasing of the sound could occur.
This results in high frequency audio, that would not be produced on an Amiga.
The current version of this package does not filter out these artifacts.
This should not be a problem if you're not concerned with producing an
accurate Amiga timbre.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other module.operations:
<code><a href="PTModule-class.html">PTModule-class</a></code>,
<code><a href="appendPattern.html">appendPattern</a>()</code>,
<code><a href="clearSamples.html">clearSamples</a>()</code>,
<code><a href="clearSong.html">clearSong</a>()</code>,
<code><a href="deletePattern.html">deletePattern</a>()</code>,
<code><a href="fix.PTModule.html">fix.PTModule</a>()</code>,
<code><a href="moduleSize.html">moduleSize</a>()</code>,
<code><a href="patternLength.html">patternLength</a>()</code>,
<code><a href="patternOrderLength.html">patternOrderLength</a>()</code>,
<code><a href="patternOrder.html">patternOrder</a>()</code>,
<code><a href="playMod.html">playMod</a>()</code>,
<code><a href="playingtable.html">playingtable</a>()</code>,
<code><a href="rawToPTModule.html">rawToPTModule</a>()</code>,
<code><a href="read.module.html">read.module</a>()</code>,
<code><a href="trackerFlag.html">trackerFlag</a>()</code>,
<code><a href="write.module.html">write.module</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Pepijn de Vries</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mod.intro</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wav</span> <span class="op">&lt;-</span> <span class="fu">modToWave</span><span class="op">(</span><span class="va">mod.intro</span>, max.duration <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Processing pattern tables...		done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Processing pattern order...		done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> generating channel wave data:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Track 1:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Processing volume effects...	done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Processing period effects...	done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Resampling...			done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Applying low pass filter...		done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Track 2:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Processing volume effects...	done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Processing period effects...	done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Resampling...			done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Applying low pass filter...		done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Track 3:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Processing volume effects...	done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Processing period effects...	done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Resampling...			done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Applying low pass filter...		done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Track 4:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Processing volume effects...	done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Processing period effects...	done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Resampling...			done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Applying low pass filter...		done</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mixing channels...			done</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pepijn de Vries.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

